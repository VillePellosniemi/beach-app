(this["webpackJsonpcity-swimmer"]=this["webpackJsonpcity-swimmer"]||[]).push([[0],{174:function(e,t,a){e.exports=a(398)},179:function(e,t,a){},202:function(e,t,a){},398:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(73),c=a.n(r),s=(a(179),a(10)),o=a(2),i=a(45),m=a(22),u=a(23),p=a(26);var d=function(e){return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(s.b,{to:"/~lauriaus/build/",className:"font-bold block pt-5",onClick:e.closeMenu},n.a.createElement("img",{src:"/~lauriaus/build/logo.png",className:"block object-cover h-full w-2/3 ml-auto mr-auto py-10"}))),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(s.b,{to:"/~lauriaus/build/favorites",className:"py-5 border-b block text-center",onClick:e.closeMenu},"Favorite Beaches")),n.a.createElement("li",null,n.a.createElement(s.b,{to:"/~lauriaus/build/setting",className:"py-5 border-b block text-center",onClick:e.closeMenu},"Setting"))))};var h=function(){var e=Object(l.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(p.b)(a,null,{from:{position:"absolute",opacity:0},enter:{opacity:1},leave:{opacity:0}}),s=Object(p.b)(a,null,{from:{opacity:0,transform:"translateX(-100%)"},enter:{opacity:1,transform:"translateX(0%)"},leave:{opacity:0,transform:"translateX(-100%)"}});return n.a.createElement("nav",null,n.a.createElement("span",{className:"text-center text-xl font-bold p-3"},n.a.createElement(m.a,{icon:u.a,onClick:function(){return r(!a)}})),c.map((function(e){var t=e.item,a=e.key,l=e.props;return t&&n.a.createElement(p.a.div,{key:a,style:l,className:"fixed bg-black-t-50 top-0 left-0 w-full h-full z-50",onClick:function(){return r(!1)}})})),s.map((function(e){var t=e.item,a=e.key,l=e.props;return t&&n.a.createElement(p.a.div,{key:a,style:l,className:"fixed bg-white top-0 left-0 w-2/3 h-full shadow z-50 shadow"},n.a.createElement(d,{closeMenu:function(){return r(!1)}}))})))},f=a(31),b=a(11),E=a(17),v=a(13),x=a(14);var g=function(){return n.a.createElement("div",{className:"flex justify-center"},n.a.createElement("div",{className:"loader"}))},k=a(170),N=a.n(k);function y(e){var t=Object(l.useState)({loading:!1,dt:null}),a=Object(i.a)(t,2),n=a[0],r=a[1];return Object(l.useEffect)((function(){r({loading:!0,dt:null}),N.a.get(e).then((function(e){r({loading:!1,dt:e.data.sensors})})).catch((function(e){console.log(e)}))}),[e]),n}var w=function(e){var t=y("https://iot.fvh.fi/opendata/uiras/uiras2_v1.json"),a=null;return t.loading&&(a=n.a.createElement(g,null)),t.dt&&(a=Object.keys(t.dt).map((function(a,l){var r=Object.values(a).join("");return t.dt[a].meta.name.toLowerCase().includes(e.beachName)?n.a.createElement("h1",{className:"p-5",key:l},n.a.createElement(s.b,{to:"/~lauriaus/build/".concat(r),onClick:e.closeMenu},t.dt[a].meta.name)):null}))),n.a.createElement("div",{className:"overflow-auto h-40 text-left font-xl font-semibold pb-3"}," ",a," ")},j=function(e){Object(x.a)(a,e);var t=Object(v.a)(a);function a(e){var l;return Object(b.a)(this,a),(l=t.call(this,e)).state={beachName:"",submitted:!1},l.handleChange=function(e){l.setState({beachName:e.target.value})},l.handleSubmit=function(e){e.preventDefault(),l.setState({submitted:!0,beachName:l.state.beachName})},l}return Object(E.a)(a,[{key:"render",value:function(){return console.log(this.props),n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",{className:"text-center text-xl font-bold"},"Search"),n.a.createElement("form",{id:"searchField",className:"pt-2 relative w-full mx-auto text-gray-600",onSubmit:this.handleSubmit},n.a.createElement("input",{className:"border-2 border-gray-300 bg-white h-10 w-full px-3 pr-20 rounded-xl text-sm focus:outline-none",type:"search",name:"search",placeholder:"Enter beach name",value:this.state.beachName,onChange:this.handleChange}),n.a.createElement("input",{className:"absolute right-0 top-0 h-10 mt-2 text-center text-white px-2 rounded-r-xl bg-green-400",type:"submit",value:"Submit"})),n.a.createElement("div",null,this.state.submitted?n.a.createElement(w,{beachName:this.state.beachName,closeMenu:this.props.closeMenu}):null))}}]),a}(n.a.Component);var M=function(e){return n.a.createElement("div",null,n.a.createElement("h1",{className:"top-0 right-0 text-xl font-bold",onClick:e.closeMenu},"x"),n.a.createElement("div",{className:"h-full "},n.a.createElement(j,{closeMenu:e.closeMenu})))};var O=function(){var e=Object(l.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],c={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},s=Object(p.b)(a,null,{from:{position:"absolute",opacity:0},enter:{opacity:1},leave:{opacity:0},config:{duration:100}});return n.a.createElement("div",null,n.a.createElement("span",{className:"text-center text-xl font-bold p-3"},n.a.createElement(m.a,{icon:u.f,onClick:function(){return r(!a)}})),s.map((function(e){var t=e.item,a=e.key,l=e.props;return t&&n.a.createElement(p.a.div,{key:a,style:l,className:"bg-black-t-50 fixed top-0 left-0 w-full h-full z-50",onClick:function(){return r(!1)}})})),s.map((function(e){var t,a=e.item,l=e.key,s=e.props;return a&&n.a.createElement(p.a.div,(t={key:l,style:s},Object(f.a)(t,"style",c),Object(f.a)(t,"className","w-4/5 items-center bg-white rounded-xl pb-10 shadow z-50 px-3"),t),n.a.createElement(M,{closeMenu:function(){return r(!1)}}))})))};function S(){window.location.assign("http://users.metropolia.fi/~lauriaus/build/")}var C=function(){return n.a.createElement("header",{className:"flex justify-center items-center p-3"},n.a.createElement("div",{className:"flex-1"},n.a.createElement(h,null)),n.a.createElement("span",{className:"flex-1 items-center",onClick:S},n.a.createElement("img",{src:"logo.png",className:"object-cover h-auto w-auto ml-auto mr-auto"})),n.a.createElement("div",{className:"flex-1 text-right"},n.a.createElement(O,null)))};function _(e,t,a,l){var n=a*Math.PI/180,r=e*Math.PI/180,c=(e-a)*Math.PI/180,s=(t-l)*Math.PI/180,o=Math.sin(c/2)*Math.sin(c/2)+Math.cos(n)*Math.cos(r)*Math.sin(s/2)*Math.sin(s/2);return 6371e3*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}var I=a(171);var L=function(){var e=y("https://iot.fvh.fi/opendata/uiras/uiras2_v1.json"),t=null,a=Object(I.usePosition)(!0),l=a.latitude,r=a.longitude,c=l,o=r;return e.loading&&(t=n.a.createElement(g,null)),e.dt&&(t=Object.keys(e.dt).sort((function(t,a){return _(e.dt[t].meta.lat,e.dt[t].meta.lon,c,o)-_(e.dt[a].meta.lat,e.dt[a].meta.lon,c,o)})).map((function(t,a){var l=Object.values(t).join(""),r=_(e.dt[t].meta.lat,e.dt[t].meta.lon,c,o)/1e3;return n.a.createElement("div",{className:"block relative pb-5 px-5",key:a},n.a.createElement(s.b,{to:"/~lauriaus/build/".concat(l)},n.a.createElement("img",{src:"images/".concat(l,".jpg"),style:{height:"135px"},className:"object-cover rounded-xl w-full"}),n.a.createElement("div",{className:"w-full text-white font-medium absolute bottom-0 left-3 pl-5"},n.a.createElement("h1",{className:"w-2/3 truncate text-2xl"},e.dt[t].meta.name),n.a.createElement("h1",{className:"text-base italic pb-8"},Math.round(10*r)/10," km away"))))}))),n.a.createElement("div",null,n.a.createElement("h1",{className:"font-bold text-lg text-left pl-5"},"Beaches near you"),n.a.createElement("div",{className:"overflow-scroll w-full max-h-full pt-5"}," ",t," "))};var B=function(){var e=y("https://iot.fvh.fi/opendata/uiras/uiras2_v1.json"),t=null,a=JSON.parse(localStorage.getItem("favorites"));return e.loading&&(t=n.a.createElement(g,null)),e.dt&&(t=Object.keys(e.dt).map((function(t,l){if(t&&a&&a.includes(t)){var r=Object.values(t).join("");return n.a.createElement("div",{className:"block relative pt-4 px-5",key:l},n.a.createElement(s.b,{to:"/~lauriaus/build/".concat(r)},n.a.createElement("img",{src:"images/".concat(r,".jpg"),className:"object-cover rounded-xl h-24 w-full"}),n.a.createElement("div",{className:"w-2/3 truncate text-white text-xl font-medium absolute bottom-0 left-3 pl-3 pb-3"},e.dt[t].meta.name," ")))}}))),n.a.createElement("div",{className:"overflow-scroll w-full max-h-screen pb-5"},n.a.createElement("h1",{className:"font-bold text-2xl text-center"},"Favorites"),t)};var F=function(){return n.a.createElement("div",null,n.a.createElement("h1",{className:"font-bold text-2xl text-center mb-5"},"Discount"),n.a.createElement("ul",null,n.a.createElement("li",{className:"py-5 border-b block text-left mx-5"},"Restaurant"),n.a.createElement("li",{className:"py-5 border-b block text-left mx-5"},"Supboard rent")))};a(202);var J=function(){return n.a.createElement("div",null,n.a.createElement("h1",{className:"font-bold text-2xl text-center mb-5"},"Setting"),n.a.createElement("ul",null,n.a.createElement("li",{className:"flex py-5 border-b block text-left mx-5"},n.a.createElement("h1",{className:"flex-1"},"Language"),n.a.createElement("select",{id:"languages",className:"flex-2 rounded-lg p-1"},n.a.createElement("option",{value:"eng",selected:!0},"English"),n.a.createElement("option",{value:"fin"},"Suomi"),n.a.createElement("option",{value:"sve"},"Svenska"))),n.a.createElement("li",{className:"flex py-5 border-b block text-left mx-5"},n.a.createElement("h1",{className:"flex-1"},"Dark mode"),n.a.createElement("label",{class:"switch"},n.a.createElement("input",{type:"checkbox"}),n.a.createElement("span",{class:"slider round"})))))},P=a(25),D=a(35),z=a(100),W=a.n(z),q=Object(D.compose)()((function(e){return n.a.createElement("div",{className:"bg-gray-100"},n.a.createElement("img",{src:"images/".concat(e.name,".jpg"),className:"relative object-cover h-60 w-full"}),n.a.createElement("div",{className:"absolute w-full -mt-20 rounded-t-3xl bg-white py-8"},n.a.createElement("h1",{className:"text-center font-bold text-2xl"},e.beach_name," "),n.a.createElement("div",{className:"flex items-center p-3"},n.a.createElement("span",{className:"flex-1 text-center text-green-500 text-xl",onClick:e.updateLikes},n.a.createElement(m.a,{icon:u.h,className:e.state.likeButton}),n.a.createElement("h1",{className:"text-base"},e.state.likes," liked")),n.a.createElement("span",{className:"flex-1 text-center text-red-500 text-xl",onClick:e.onFavoriteClick},n.a.createElement(m.a,{icon:u.c,className:e.state.heart}),n.a.createElement("h1",{className:"text-base"},e.state.favoriteMessage)),n.a.createElement("span",{className:"flex-1 text-center text-blue-500 text-xl"},n.a.createElement(s.b,{to:"/~lauriaus/build/".concat(e.name,"/map")},n.a.createElement(m.a,{icon:u.e}),n.a.createElement("h1",{className:"text-base"},"map"))),n.a.createElement("span",{className:"flex-1 text-center text-yellow-500 text-xl"},n.a.createElement("a",{href:"".concat(e.web)},n.a.createElement(m.a,{icon:u.b}),n.a.createElement("h1",{className:"text-base"},"website")))),n.a.createElement("div",{className:"flex content-center text-xl pb-2 px-2 "},n.a.createElement("div",{className:"flex-1 text-center rounded-xl bg-gray-200 h-40 m-2 pt-8 p-6"},n.a.createElement("h1",null,"Water temp"),n.a.createElement("h1",{className:"text-4xl"},e.temp_water,"\xb0C ")),n.a.createElement("div",{className:"flex-1 text-center rounded-xl bg-gray-200 h-40 m-2 pt-8 p-6"},n.a.createElement("h1",null,"Air temp"),n.a.createElement("h1",{className:"text-4xl"},e.temp_air,"\xb0C "))),n.a.createElement("div",{className:"flex content-center text-xl pb-2 px-2"},n.a.createElement("div",{className:"flex-1 text-center rounded-xl bg-gray-200 h-40 m-2 pt-8 p-6"},n.a.createElement("h1",null,"Services"),n.a.createElement("h1",{className:"text-4xl"},n.a.createElement("a",{href:"".concat(e.url,"?p=1&t=accessibilityDetails")},n.a.createElement(m.a,{icon:u.d})))),n.a.createElement("div",{className:"flex-1 text-center rounded-xl bg-gray-200 h-40 m-2 pt-8 p-6"},n.a.createElement("h1",null,"Discount"),n.a.createElement(s.b,{to:"".concat(e.name,"/promodiscount"),className:"text-4xl"},n.a.createElement(m.a,{icon:u.g})))),n.a.createElement("div",{className:"absolute w-full bottom-0 left-0 mb-3 text-center text-gray-600 italic"},n.a.createElement("h1",null,"Last updated: ",e.time))))})),G=function(e){Object(x.a)(a,e);var t=Object(v.a)(a);function a(e){var l;return Object(b.a)(this,a),(l=t.call(this,e)).updateLikes=function(){l.state.updated?(localStorage.setItem(l.props.name,"false"),l.setState((function(e,t){return{likes:e.likes-1,likeButton:"text-gray-500",updated:!1}}))):(localStorage.setItem(l.props.name,"true"),l.setState((function(e,t){return{likes:e.likes+1,likeButton:"text-green-500",updated:!0}})))},l.handleFavoriteClick=function(){if(console.log("Favorite clicked! ",l.props.name),l.props.favorites.includes(l.props.name)){var e=l.props.favorites,t=e.indexOf(l.props.name);-1!==t&&e.splice(t,1),localStorage.setItem("favorites",JSON.stringify(l.props.favorites)),l.setState({heart:"text-gray-500",favoriteMessage:"favorite"})}else l.props.favorites.push(l.props.name),localStorage.setItem("favorites",JSON.stringify(l.props.favorites)),l.setState({heart:"text-red-500",favoriteMessage:"favorited"})},l.state={heart:l.props.heart,favoriteMessage:l.props.favoriteMessage,likeButton:l.props.likeButton,likes:l.props.likes,updated:JSON.parse(localStorage.getItem(l.props.name))},l.updateLikes=l.updateLikes.bind(Object(P.a)(l)),l}return Object(E.a)(a,[{key:"render",value:function(){return n.a.createElement(q,{beach_name:this.props.beach_name,name:this.props.name,temp_water:this.props.temp_water,temp_air:this.props.temp_air,url:this.props.url,web:this.props.web,favorites:this.props.favorites,time:this.props.time,likes:this.props.likes,state:this.state,onFavoriteClick:this.handleFavoriteClick,updateLikes:this.updateLikes})}}]),a}(n.a.PureComponent);var X,A=(X=G,function(e){var t=Object(o.f)().name,a=y("https://iot.fvh.fi/opendata/uiras/uiras2_v1.json"),l=null,r=JSON.parse(localStorage.getItem("favorites")),c="text-gray-500",s="favorite",i=68,m="text-gray-500";return a.loading&&(l=n.a.createElement(g,null)),r||(r=[]),r&&r.includes(t)&&(c="text-red-500",s="favorited"),JSON.parse(localStorage.getItem(t))&&(m="text-green-500",i+=1),a.dt?(console.log(a),n.a.createElement(X,Object.assign({},e,{time:W()(a.dt[t].data.slice(-1)[0].time).fromNow(),temp_water:Math.round(10*a.dt[t].data.slice(-1)[0].temp_water)/10,temp_air:Math.round(10*a.dt[t].data.slice(-1)[0].temp_air)/10,url:a.dt[t].meta.servicemap_url,web:a.dt[t].meta.site_url,favorites:r,name:t,beach_name:a.dt[t].meta.name,heart:c,favoriteMessage:s,likes:i,likeButton:m}))):n.a.createElement("div",{className:""}," ",l," ")}),R=a(47),V=Object(D.compose)(Object(D.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places",loadingElement:n.a.createElement("div",{style:{height:"80%"}}),containerElement:n.a.createElement("div",{style:{height:"400px"}}),mapElement:n.a.createElement("div",{style:{height:"95vh",width:"100%"}})}),R.withScriptjs,R.withGoogleMap)((function(e){return n.a.createElement(R.GoogleMap,{defaultZoom:14,defaultCenter:{lat:e.lat,lng:e.lng}},e.isMarkerShown&&n.a.createElement(R.Marker,{position:{lat:e.lat,lng:e.lng},onClick:e.onMarkerClick},e.isOpen&&n.a.createElement(R.InfoWindow,{onCloseClick:e.onhandleCloseClick},n.a.createElement("div",null,n.a.createElement("h1",{className:"text-base mb-2 font-bold text-center"},e.name),n.a.createElement("a",{className:"text-blue-400 text-base",href:"https://maps.google.com?q="+e.name+"::"+e.lat+","+e.lng},"View on Google Maps"),n.a.createElement("br",null),n.a.createElement("a",{className:"text-blue-400 text-base",href:"https://reittiopas.hsl.fi/reitti/%20/"+e.name+"::"+e.lat+","+e.lng},"View on HSL")))))}));var H=function(e){return function(t){var a=Object(o.f)().name,l=y("https://iot.fvh.fi/opendata/uiras/uiras2_v1.json"),r=null;return l.loading&&(r=n.a.createElement(g,null)),l.dt?(console.log(l),n.a.createElement(e,Object.assign({},t,{lat:l.dt[a].meta.lat,lng:l.dt[a].meta.lon,name:l.dt[a].meta.name,site_url:l.dt[a].meta.site_url}))):n.a.createElement("div",null," ",r," ")}}(function(e){Object(x.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={isMarkerShown:!1},e.delayedShowMarker=function(){setTimeout((function(){e.setState({isMarkerShown:!0})}),500)},e.handleMarkerClick=function(){console.log("Marker clicked!"),e.setState({isOpen:!0})},e.handleCloseClick=function(){console.log("Marker Closed!"),e.setState({isOpen:!1})},e}return Object(E.a)(a,[{key:"componentDidMount",value:function(){this.delayedShowMarker()}},{key:"render",value:function(){return n.a.createElement(V,{lat:this.props.lat,lng:this.props.lng,name:this.props.name,site_url:this.props.site_url,isMarkerShown:this.state.isMarkerShown,isOpen:this.state.isOpen,onMarkerClick:this.handleMarkerClick,onhandleCloseClick:this.handleCloseClick})}}]),a}(n.a.PureComponent));var T=function(){return n.a.createElement("div",{className:"h-screen"},n.a.createElement(s.a,null,n.a.createElement(C,null),n.a.createElement(o.c,null,n.a.createElement(o.a,{exact:!0,path:"/~lauriaus/build/"},n.a.createElement(L,null)),n.a.createElement(o.a,{exact:!0,path:"/~lauriaus/build/favorites"},n.a.createElement(B,null)),n.a.createElement(o.a,{exact:!0,path:"/~lauriaus/build/:name/promodiscount"},n.a.createElement(F,null)),n.a.createElement(o.a,{exact:!0,path:"/~lauriaus/build/setting"},n.a.createElement(J,null)),n.a.createElement(o.a,{exact:!0,path:"/~lauriaus/build/:name"},n.a.createElement(A,null)),n.a.createElement(o.a,{exact:!0,path:"/~lauriaus/build/:name/map"},n.a.createElement(H,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[174,1,2]]]);
//# sourceMappingURL=main.91368850.chunk.js.map